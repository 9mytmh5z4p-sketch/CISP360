# For-Each Loops and Menu-Driven Programs

Why doesn't a for-each loop work for menu-driven programs? Understanding the fundamental mismatch between for-each loop design and menu-driven program requirements is essential for choosing the correct loop structure.

::: notes
Total slides in this section: 5

This introduction poses a question that highlights a common mistake students make when building menu-driven programs, leading them to understand why loop selection matters.
:::

<!-- Slide 1 -->

---

## What is the Problem?

For-each loops are designed to iterate through existing collections of data, but menu-driven programs need to repeatedly prompt the user for input until they choose to exit. This fundamental difference makes for-each loops inappropriate for menu-driven programs.

```cpp
// This DOESN'T make sense for a menu-driven program
vector<int> menuChoices;  // What collection would this be?
for (int choice : menuChoices) {
    // How do we get user input?
    // How do we control when to stop?
}
```

A for-each loop requires a pre-existing collection to iterate through, but menu-driven programs don't have a collection of menu choices to iterate over. They need to repeatedly ask the user for new input based on dynamic user decisions.

::: notes
A diagram showing the mismatch would be helpful: for-each expecting a fixed collection versus menu-driven needing dynamic, user-controlled repetition.
:::

<!-- Slide 2 -->

---

## For-Each Loop Purpose

For-each loops are specifically designed to process each element in an existing collection exactly once in a predetermined sequence.

```cpp
// Appropriate use of for-each: processing existing data
vector<int> scores = {85, 92, 78, 95, 88};
for (int score : scores) {
    cout << "Score: " << score << endl;
}

// Another appropriate use: processing array elements
string names[] = {"Alice", "Bob", "Charlie"};
for (string name : names) {
    cout << "Hello, " << name << endl;
}
```

The for-each loop visits every element in the collection automatically and terminates when all elements have been processed. The programmer has no control over when to stop or how many times to iterate.

<!-- Slide 3 -->

---

## Menu-Driven Program Requirements

Menu-driven programs require a loop that continues based on user decisions, not based on iterating through a collection.

```cpp
// What a menu-driven program needs (conceptually):
// 1. Display menu options
// 2. Get user choice
// 3. Process the choice
// 4. Repeat until user chooses to exit

// Menu-driven programs need:
// - Unknown number of iterations (user controls when to stop)
// - Dynamic input at each iteration (user enters new choice)
// - Ability to exit based on specific user input
// - No pre-existing collection to iterate through
```

The number of iterations is determined by the user's choices at runtime, not by the size of a collection. The loop must continue until the user explicitly chooses an exit option.

::: notes
A flowchart showing the menu-driven loop cycle would illustrate the difference: display menu → get input → process choice → check if user wants to continue → repeat.
:::

<!-- Slide 4 -->

---

## Summary

For-each loops are designed to iterate through pre-existing collections and cannot accommodate the dynamic, user-controlled repetition required by menu-driven programs. Menu-driven programs need loop structures that continue based on user input rather than collection size.

<!-- Slide 5 -->

---

# Appendix

<!-- Appendix Title Slide -->

---

## Common Practices

Recognize that for-each loops are appropriate only when you have an existing collection to process. For menu-driven programs, use loop structures designed for condition-based repetition.

```cpp
// Appropriate: For-each with existing collection
vector<string> items = {"apple", "banana", "cherry"};
for (string item : items) {
    processItem(item);
}

// Not appropriate: Trying to use for-each for menu
// There is no collection of user choices to iterate through
```

When designing a program, identify whether you're processing existing data (use for-each) or waiting for dynamic user input (use a different loop structure). The nature of the task should guide your loop choice.

<!-- Appendix Slide 1 -->

---

## Common Mistakes

Attempting to force a for-each loop to work with menu-driven programs by creating artificial collections is a common error that results in awkward, non-functional code.

```cpp
// MISTAKE: Creating a meaningless collection for menu-driven program
vector<int> menuRange = {1, 2, 3, 4, 5};  // Arbitrary numbers
for (int i : menuRange) {
    displayMenu();
    int choice;
    cin >> choice;
    // This will only loop 5 times regardless of user intent
    // User cannot control when to exit
}
```

This approach completely misses the point of menu-driven programs. The loop runs a fixed number of times determined by the collection size, not by user decisions. The user cannot exit when they want, and the program cannot continue indefinitely until the user chooses to quit.

<!-- Appendix Slide 2 -->

---

## More Examples

These examples illustrate appropriate uses of for-each loops versus scenarios requiring different loop structures.

```cpp
// Example 1: Appropriate for-each use - calculating average
vector<double> temperatures = {72.5, 68.3, 75.1, 70.9};
double sum = 0;
for (double temp : temperatures) {
    sum += temp;
}
double average = sum / temperatures.size();

// Example 2: Appropriate for-each use - validating data
vector<int> ages = {25, 30, -5, 42, 18};
for (int age : ages) {
    if (age < 0) {
        cout << "Invalid age detected: " << age << endl;
    }
}

// Example 3: NOT appropriate - ATM menu system
// An ATM needs to keep showing options until user selects "Exit"
// There is no collection to iterate through
// The number of transactions is unknown in advance

// Example 4: NOT appropriate - Game main loop
// A game menu needs to run until player chooses "Quit"
// Cannot use for-each because there's no collection of player choices
```

<!-- Appendix Slide 3 -->

---

## Practice Problems

1. Explain in your own words why a for-each loop cannot be used to implement a calculator program that repeatedly asks the user to enter two numbers and an operation until they choose to quit.

2. Identify whether a for-each loop would be appropriate for each scenario: (a) displaying all items in a shopping cart, (b) running a restaurant ordering system until customer says "done", (c) printing all students in a class roster.

3. A student writes this code for a menu-driven program: `vector<int> v = {1,2,3,4,5}; for(int x : v) { displayMenu(); }` What fundamental misunderstanding does this demonstrate about for-each loops?

4. List three characteristics that menu-driven programs require from their loops that for-each loops cannot provide.

5. Given a scenario where you need to process exam scores stored in an array and calculate the class average, would a for-each loop be appropriate? Why or why not? How does this differ from a menu-driven program?

<!-- Appendix Slide 4 -->

---

## AI Search Terms

Use these search terms when researching loop selection or seeking additional help from AI assistants or search engines.

- "C++ range-based for loop appropriate use cases"
- "when not to use for-each loop C++"
- "C++ menu-driven program loop structure"
- "for-each vs while loop menu programs C++"
- "C++ loop selection guidelines"
- "range-based for loop limitations C++"
- "choosing correct loop type C++"
- "C++ iterating collections vs user input loops"

<!-- Appendix Slide 5 -->

---

## Questions for Reflection

1. What is the fundamental difference between processing a collection of existing data versus waiting for user input in a menu-driven program?

2. If a for-each loop requires a collection to iterate through, what would that collection contain in a menu-driven program, and why doesn't that make sense?

3. How does the concept of "control" differ between for-each loops (which iterate automatically) and menu-driven programs (which need user-controlled repetition)?

4. Can you think of other programming scenarios besides menu-driven programs where for-each loops would be inappropriate? What do these scenarios have in common?

5. Why is it important to understand what a loop construct is designed for rather than just memorizing syntax?

<!-- Appendix Slide 6 -->