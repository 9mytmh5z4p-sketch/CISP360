
# Looping (Iteration)

::: notes
~
::: 

## What is it?

Looping is the process of executing the same block of code over and over.

. . . 

There are a number of different types of loops - we'll go into detail later.

---

Today we are going to start with the **Range-Based Loop** because it was made for data structures like vectors.

## Range-Based For Loop in C++

## What is a range-based for loop?

You've learned how to access individual vector elements using indexes:

```cpp
vector<int> scores = {85, 92, 78, 95, 88};

cout << scores[0] << endl;
cout << scores[1] << endl;
cout << scores[2] << endl;
cout << scores[3] << endl;
cout << scores[4] << endl;
```

---

But what if you have 100 scores? Typing each one would be tedious!

What to do, what to do?

---

**Range-Based for Loop**

The **range-based for loop** (also called a "for-each loop") automatically goes through **every element** in a container like a vector.

Think of it as: "**For each** element in the vector, do something with it."

## Why use range-based for loops?

Range-based for loops make your code:

- **Cleaner** - No index management needed
- **Easier to read** - The intent is clear
- **Less error-prone** - No risk of wrong indexes
- **More concise** - Fewer lines of code
- **More modern** - Introduced in C++11

---

**Compare these two approaches:**

**Without range-based loop (manual indexing):**
```cpp
vector<int> scores = {85, 92, 78, 95, 88};

for (int i = 0; i < scores.size(); i++) {
    cout << scores[i] << endl;
}
```

I know you haven't learned this loop yet, but this is what you would need to do if we didn't have the range-based loop.

---

**With range-based loop:**
```cpp
vector<int> scores = {85, 92, 78, 95, 88};

for (int score : scores) {
    cout << score << endl;
}
```

Both produce the same output, but the range-based loop is simpler!

## Basic syntax

The basic syntax of a range-based for loop:

```cpp
for (type element : container) {
    // Code to repeat goes in here
}
```

**Breaking it down:**

- `for` - The for loop keyword
- `type` - The data type of each element
- `element` - A variable name you choose (holds each value)
- `:` - Read as "in" (for each element **in** container)
- `container` - The vector (or other container) to loop through

---

**Example:**
```cpp
vector<int> scores = {85, 92, 78, 95, 88};

for (int score : scores) {
    cout << score << endl;
}
```

Read as: "**For each int score in scores**, display the score"

## How it works - Step by step

Let's see what happens at each step:

```{.cpp} 
vector<string> fruits = {"Apple", "Banana", "Orange"};

for (string fruit : fruits) {   // apple
    cout << fruit << endl;
}
```

**Step 1:** `fruit` gets the first element ("Apple")
- Executes: `cout << "Apple" << endl;`

---

```{.cpp} 
vector<string> fruits = {"Apple", "Banana", "Orange"};

for (string fruit : fruits) {   // banana
    cout << fruit << endl;
}
```

**Step 2:** `fruit` gets the second element ("Banana")
- Executes: `cout << "Banana" << endl;`

---

```{.cpp} 
vector<string> fruits = {"Apple", "Banana", "Orange"};

for (string fruit : fruits) {   // orange
    cout << fruit << endl;
}
```

**Step 3:** `fruit` gets the third element ("Orange")
- Executes: `cout << "Orange" << endl;`

---

```{.cpp} 
vector<string> fruits = {"Apple", "Banana", "Orange"};

for (string fruit : fruits) {   // null
    cout << fruit << endl;
}
```

**Step 4:** No more elements, loop ends

---

```{.cpp} 
vector<string> fruits = {"Apple", "Banana", "Orange"};

for (string fruit : fruits) {
    cout << fruit << endl;
}
```

**Output:**
```
Apple
Banana
Orange
```

## Process Diagram

::: {style="text-align: center;"}

```plantuml
@startuml
scale 1.5
!theme plain
skinparam defaultFontName Arial
skinparam backgroundColor white

start

:Initialize vector\nvector<int> nums = {10, 20, 30};

:Get first element from vector;

while (More elements in vector?) is (true)
  :Copy current element to loop variable\n(e.g., int num = 10);
  
  :Execute loop body\n(e.g., cout << num);
  
  :Move to next element;
endwhile (no)

:Continue with rest of program;

stop

@enduml
```

::: notes
**Explanation:**
1. **Start Loop** - Begin range-based for loop
2. **Check** - Are there more elements in the vector?
3. **Assign** - If yes, copy next element to loop variable
4. **Execute** - Run the code block with current element
5. **Loop back** - Go back to check for more elements
6. **Exit** - When no more elements, exit loop
::: 

:::

## Your first range-based for loop

::: {.columns}
::: {.column width="70%"}
```cpp
#include <iostream>
#include <vector>
using namespace std;

int main() {
    vector<int> numbers = {10, 20, 30, 40, 50};
    
    cout << "The numbers are:" << endl;
    
    for (int num : numbers) {
        cout << num << endl;
    }
    
    return 0;
}
```
:::

::: {.column width="30%"}
**Output:**
```
The numbers are:
10
20
30
40
50
```
:::
::: 

---

**What happened:**

- The loop automatically went through each element
- Each time, `num` held the current value
- We displayed each value
- No indexes needed!

## Looping with Different Types

Range-based for loops work with vectors of any type.

**Integer vectors:**

::: {.columns}
::: {.column width="70%"}

```cpp
vector<int> ages = {25, 30, 22, 35, 28};

for (int age : ages) {
    cout << "Age: " << age << endl;
}
```
:::

::: {.column width="30%"}

**Output:**
```
Age: 25
Age: 30
Age: 22
Age: 35
Age: 28
```
:::
:::

---

**Double vectors:**

::: {.columns}
::: {.column width="70%"}

```cpp
vector<double> prices = {19.99, 24.50, 15.75, 32.00};

for (double price : prices) {
    cout << "$" << price << endl;
}
```
:::

::: {.column width="30%"}

**Output:**
```
$19.99
$24.50
$15.75
$32.00
```
:::
:::

---

**String vectors:**

::: {.columns}
::: {.column width="70%"}

```cpp
vector<string> names = {"Alice", "Bob", "Charlie", "Diana"};

for (string name : names) {
    cout << "Hello, " << name << "!" << endl;
}
```
:::

::: {.column width="30%"}

**Output:**
```
Hello, Alice!
Hello, Bob!
Hello, Charlie!
Hello, Diana!
```
:::
:::

## Naming the loop variable

You can name the loop variable anything you want. Choose names that make sense!

**Good names:**

```cpp
vector<int> scores = {85, 92, 78};
for (int score : scores) { }  // Clear and descriptive

vector<string> cities = {"Paris", "London", "Tokyo"};
for (string city : cities) { }  // Singular of container name

vector<double> temperatures = {72.5, 68.3, 75.1};
for (double temp : temperatures) { }  // Abbreviation is fine
```

---

**Avoid confusing names:**

```cpp
vector<int> scores = {85, 92, 78};
for (int x : scores) { }  // Too generic
for (int data : scores) { }  // Vague
for (int scores : scores) { }  // Same as container name - confusing!
```

**Convention:** Use the singular form of your vector name for the loop variable.

## Calculating with range-based loops

Range-based for loops are perfect for calculations involving all elements.

**Example: Sum of all elements**

::: {.columns}
::: {.column width="70%"}

```cpp
vector<int> scores = {85, 92, 78, 95, 88};

int total = 0;

for (int score : scores) {
    total += score;
}

cout << "Total: " << total << endl;
```
:::

::: {.column width="30%"}

**Output:**
```
Total: 438
```
:::
:::

---

**How it works:**

- Start with `total = 0`
- First iteration: `total = 0 + 85 = 85`
- Second iteration: `total = 85 + 92 = 177`
- Third iteration: `total = 177 + 78 = 255`
- Fourth iteration: `total = 255 + 95 = 350`
- Fifth iteration: `total = 350 + 88 = 438`

## Example - Average calculator

```cpp
#include <iostream>
#include <vector>
#include <iomanip>
using namespace std;

int main() {
    vector<int> testScores = {88, 92, 76, 95, 85};
    
    cout << "Test Scores:" << endl;
    
    // Display all scores
    for (int score : testScores) {
        cout << score << " ";
    }
    cout << endl;
    
    // Calculate total
    int total = 0;
    for (int score : testScores) {
        total += score;
    }
    
    // Calculate average
    double average = static_cast<double>(total) / testScores.size();
    
    cout << fixed << setprecision(1);
    cout << "Total Points: " << total << endl;
    cout << "Average Score: " << average << endl;
    
    return 0;
}
```

---

**Output:**
```
Test Scores:
88 92 76 95 85 
Total Points: 436
Average Score: 87.2
```

## Formatting with range-based loops

Range-based loops work great with formatting manipulators.

---

**Example: Price list with formatting**

```cpp
#include <iostream>
#include <vector>
#include <iomanip>
using namespace std;

int main() {
    vector<string> items = {"Coffee", "Bread", "Eggs", "Milk", "Butter"};
    vector<double> prices = {4.99, 2.50, 3.75, 3.25, 4.50};
    
    cout << "===== SHOPPING LIST =====" << endl;
    cout << fixed << setprecision(2);
    
    int index = 0;
    for (string item : items) {
        cout << setw(10) << left << item 
             << " $" << setw(6) << right << prices[index] << endl;
        index++;
    }
    
    // Calculate total
    double total = 0;
    for (double price : prices) {
        total += price;
    }
    
    cout << "=========================" << endl;
    cout << "TOTAL:     $" << setw(6) << right << total << endl;
    
    return 0;
}
```

---

**Output:**
```
===== SHOPPING LIST =====
Coffee     $  4.99
Bread      $  2.50
Eggs       $  3.75
Milk       $  3.25
Butter     $  4.50
=========================
TOTAL:     $ 18.99
```

## Copy behavior - Important concept

The range-based for loop **copies** each element into the loop variable.

```cpp
vector<int> scores = {85, 92, 78};

for (int score : scores) {
    cout << score << endl;
}
```

**What's happening:**

- Each element is **copied** from the vector into `score`
- `score` is a **separate variable** with its own copy
- Changes to `score` inside the loop do NOT affect the vector

**This is perfect for read-only operations!**

---

```cpp
vector<int> numbers = {10, 20, 30};

for (int num : numbers) {
    num = num * 2;  // Changes num, NOT the vector
}

// Vector is unchanged
for (int num : numbers) {
    cout << num << " ";  // Displays: 10 20 30
}
```

## Example - Shopping cart calculator

```cpp
#include <iostream>
#include <vector>
#include <iomanip>
using namespace std;

int main() {
    vector<string> items = {"Laptop", "Mouse", "Keyboard", "Monitor", "Webcam"};
    vector<int> quantities = {1, 2, 1, 1, 1};
    vector<double> prices = {899.99, 24.50, 79.99, 299.99, 89.95};
    
    cout << "========== SHOPPING CART ==========" << endl;
    cout << fixed << setprecision(2);
    cout << left;
    
    // Display items
    cout << setw(12) << "Item" 
         << setw(8) << "Qty" 
         << setw(10) << "Price" 
         << setw(10) << "Subtotal" << endl;
    cout << string(40, '-') << endl;
    
    int index = 0;
    double grandTotal = 0;
    
    for (string item : items) {
        double itemTotal = quantities[index] * prices[index];
        grandTotal += itemTotal;
        
        cout << setw(12) << item 
             << setw(8) << quantities[index]
             << "$" << setw(9) << prices[index]
             << "$" << setw(9) << itemTotal << endl;
        
        index++;
    }
    
    cout << string(40, '=') << endl;
    cout << setw(30) << "TOTAL:" << "$" << setw(9) << grandTotal << endl;
    
    return 0;
}
```

---

**Output:**
```
========== SHOPPING CART ==========
Item        Qty     Price     Subtotal  
----------------------------------------
Laptop      1       $899.99   $899.99   
Mouse       2       $24.50    $49.00    
Keyboard    1       $79.99    $79.99    
Monitor     1       $299.99   $299.99   
Webcam      1       $89.95    $89.95    
========================================
                        TOTAL: $1418.92
```

## Using const with range-based loops

For read-only operations, you can use `const` to make your intent clear and prevent accidental modifications.

```cpp
vector<int> scores = {85, 92, 78, 95, 88};

for (const int score : scores) {
    cout << score << endl;
    // score = 100;  // This would cause a compiler error!
}
```

---

**Why use const:**

- Makes code **safer** - prevents accidental changes
- Documents **intent** - clearly read-only
- May allow compiler **optimizations**

**Common practice:** Use `const` when you're only reading values, not modifying them.

## Things to do with for-each loops

**Pattern 1: Display all elements**
```cpp
for (type element : container) {
    cout << element << endl;
}
```

. . .

**Pattern 2: Sum all elements**
```cpp
type total = 0;
for (type element : container) {
    total += element;
}
```

---

**Pattern 3: Count matching elements**
```cpp
int count = 0;
for (type element : container) {
    if (element meets condition) {
        count++;
    }
}
```

## Summary

Range-based for loops provide a clean, simple way to process every element in a vector.

**Key concepts covered:**

- Syntax: `for (type element : container)`
- Automatic iteration through all elements
- No index management needed
- Works with vectors of any type
- Perfect for read-only operations
- Cleaner and less error-prone than traditional for loops
- Loop variable contains a **copy** of each element
- Using `const` for safety in read-only operations

---

**When to use range-based for loops:**

- Processing all elements
- Calculations (sum, average, product)
- Counting elements that meet criteria
- Finding min/max values
- Searching for values
- Displaying all elements
- Any operation that doesn't need indexes

---

**Remember:**

- Choose descriptive loop variable names (singular of container name)
- Match the data type to the vector's element type
- Range-based loops copy elements (safe for reading)
- Use `const` when only reading values
- For operations needing indexes, use traditional for loops

Practice using range-based for loops with different vector types and operations. They'll become your go-to tool for processing collections!


