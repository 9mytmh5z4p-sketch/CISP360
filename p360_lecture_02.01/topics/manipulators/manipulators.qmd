# Formatting Output with Manipulators

::: notes
Target duration: ~30 minutes - Comprehensive coverage of cout manipulators
:::

## Agenda

Today's topics:

- What are manipulators and why use them?
- Precision and decimal formatting (`fixed`, `setprecision`)
- Boolean formatting (`boolalpha`)
- Width and alignment (`setw`, `left`, `right`)
- Fill characters (`setfill`)
- Complete formatting examples

::: notes
This lecture assumes students are comfortable with basic cout usage. Focus on practical applications throughout.
:::

<!-- Slide 1 -->

## What Are Manipulators?

**Manipulators** are special functions that modify how `cout` displays data.

**Purpose:** Control the formatting of output (not what to display, but how to display it)

**Requirements:**
- Basic manipulators: `#include <iostream>` (endl, boolalpha, fixed)
- Advanced manipulators: `#include <iomanip>` (setprecision, setw, setfill)

```cpp
#include <iostream>
#include <iomanip>  // Always include for formatting!
using namespace std;
```

::: notes
Emphasize that manipulators are instructions that change how cout behaves. They're not data themselves.
:::

<!-- Slide 2 -->

## Decimal Precision: `setprecision(n)`

Controls how many digits are displayed.

**Without `fixed`:** Controls total significant digits
```cpp
double pi = 3.14159265;
cout << setprecision(3) << pi << endl;  // 3.14
cout << setprecision(5) << pi << endl;  // 3.1416
```

**With `fixed`:** Controls decimal places (digits after decimal)
```cpp
double price = 19.5;
cout << fixed << setprecision(2) << price << endl;  // 19.50
```

**Rule:** Always use `fixed` with `setprecision` for predictable formatting.

<!-- Slide 3 -->

## The `fixed` Manipulator

`fixed` forces fixed-point notation (regular decimals, not scientific notation).

**Without `fixed`:**
```cpp
double num = 123.456789;
cout << setprecision(2) << num << endl;  // 1.2e+02 (scientific!)
```

**With `fixed`:**
```cpp
double num = 123.456789;
cout << fixed << setprecision(2) << num << endl;  // 123.46
```

**Best practice:** Use `fixed` whenever formatting decimal numbers for users.

::: notes
Show that without fixed, large or small numbers may appear in scientific notation, which confuses users.
:::

<!-- Slide 4 -->

## Money Formatting Pattern

**Always use `fixed` with `setprecision(2)` for money:**

```cpp
double price = 29.5;
double tax = 2.3625;
double total = price + tax;

cout << fixed << setprecision(2);  // Set once for all output

cout << "Price: $" << price << endl;    // Price: $29.50
cout << "Tax:   $" << tax << endl;      // Tax:   $2.36
cout << "Total: $" << total << endl;    // Total: $31.86
```

**Note:** `fixed` and `setprecision` persist until changed.

<!-- Slide 5 -->

## Boolean Formatting: `boolalpha`

By default, booleans display as numbers (1 or 0). Use `boolalpha` for words.

**Without `boolalpha`:**
```cpp
bool isStudent = true;
bool hasLicense = false;

cout << "Student: " << isStudent << endl;   // Student: 1
cout << "License: " << hasLicense << endl;  // License: 0
```

**With `boolalpha`:**
```cpp
cout << boolalpha;
cout << "Student: " << isStudent << endl;   // Student: true
cout << "License: " << hasLicense << endl;  // License: false
```

**Tip:** Use `noboolalpha` to switch back to numbers.

<!-- Slide 6 -->

## Field Width: `setw(n)`

`setw(n)` sets the minimum width for the next output item only.

```cpp
int num = 42;

cout << setw(5) << num << endl;    //    42 (5 chars wide, right-aligned)
cout << setw(10) << num << endl;   //        42 (10 chars wide)
cout << num << endl;               // 42 (setw reset!)
```

**Critical:** `setw()` only affects the NEXT item, then resets automatically.

::: notes
Emphasize this is the most common mistake - students forget setw resets and wonder why their columns don't align.
:::

<!-- Slide 7 -->

## Creating Aligned Columns

Use `setw()` for each column item:

```cpp
cout << setw(10) << "Name" << setw(8) << "Age" << setw(10) << "Grade" << endl;
cout << setw(10) << "Alice" << setw(8) << 20 << setw(10) << 95 << endl;
cout << setw(10) << "Bob" << setw(8) << 22 << setw(10) << 88 << endl;
```

**Output:**
```
      Name     Age     Grade
     Alice      20        95
       Bob      22        88
```

::: notes
Show a diagram of how setw creates invisible boxes for each item. Point out that by default, content is right-aligned.
:::

<!-- Slide 8 -->

## Alignment: `left` and `right`

By default, output is right-aligned. Use `left` to change this.

**Right-aligned (default):**
```cpp
cout << setw(10) << "Hello" << endl;  //      Hello
```

**Left-aligned:**
```cpp
cout << left;
cout << setw(10) << "Hello" << endl;  // Hello     
```

**Switch back:**
```cpp
cout << right;  // Return to default
```

**Note:** `left` and `right` persist until changed.

<!-- Slide 9 -->

## Practical Table Example

```cpp
cout << fixed << setprecision(2);
cout << left;

cout << setw(15) << "Item" << right << setw(10) << "Price" << endl;
cout << left << setw(15) << "Coffee" << right << setw(10) << "$3.50" << endl;
cout << left << setw(15) << "Sandwich" << right << setw(10) << "$7.99" << endl;
```

**Output:**
```
Item                 Price
Coffee               $3.50
Sandwich             $7.99
```

::: notes
Walk through how we switch between left and right alignment for different columns.
:::

<!-- Slide 10 -->

## Fill Characters: `setfill(c)`

`setfill(c)` sets the character used to fill empty space in fields.

**Default is space:**
```cpp
cout << setw(10) << 42 << endl;  //         42
```

**Custom fill:**
```cpp
cout << setfill('0') << setw(5) << 42 << endl;     // 00042
cout << setfill('*') << setw(10) << "Hi" << endl;  // ********Hi
```

**Note:** `setfill` persists until changed.

<!-- Slide 11 -->

## Practical Fill Character Uses

**Invoice numbers with leading zeros:**
```cpp
int invoiceNum = 237;
cout << setfill('0') << setw(6) << invoiceNum << endl;
// Output: 000237
```

**Decorative separator lines:**
```cpp
cout << setfill('-') << setw(40) << "" << endl;
// Output: ----------------------------------------
```

**Remember:** Reset fill to space when done: `setfill(' ')`

<!-- Slide 12 -->

## Persistent vs. Temporary Manipulators

**Persistent** (stay active until changed):
- `fixed`, `scientific`
- `setprecision(n)`
- `boolalpha`, `noboolalpha`
- `left`, `right`
- `setfill(c)`

**Temporary** (reset after one use):
- `setw(n)` - **Only affects next output!**

::: notes
Create a visual showing persistent manipulators as switches that stay on, versus setw as a one-time-use token.
:::

<!-- Slide 13 -->

## Other Useful Manipulators

**`showpoint` / `noshowpoint`:** Control trailing zeros
```cpp
cout << showpoint << 5.0 << endl;  // 5.00000
```

**`scientific`:** Scientific notation
```cpp
cout << scientific << 123456789.0 << endl;  // 1.234568e+08
```

**`uppercase` / `nouppercase`:** Affects scientific notation
```cpp
cout << scientific << uppercase << 1234.5 << endl;  // 1.2345E+03
```

<!-- Slide 14 -->

## Complete Example: Receipt Formatter

```cpp
#include <iostream>
#include <iomanip>
using namespace std;

int main() {
    double coffee = 3.50, muffin = 2.75, sandwich = 7.99;
    double subtotal = coffee + muffin + sandwich;
    double tax = subtotal * 0.08;
    double total = subtotal + tax;
    
    cout << fixed << setprecision(2) << left;
    
    cout << "====== RECEIPT ======" << endl;
    cout << setw(15) << "Coffee" << "$" << right << setw(6) << coffee << endl;
    cout << left << setw(15) << "Muffin" << "$" << right << setw(6) << muffin << endl;
    cout << left << setw(15) << "Sandwich" << "$" << right << setw(6) << sandwich << endl;
    cout << setfill('-') << setw(23) << "" << setfill(' ') << endl;
    cout << left << setw(15) << "Subtotal" << "$" << right << setw(6) << subtotal << endl;
    cout << left << setw(15) << "Tax (8%)" << "$" << right << setw(6) << tax << endl;
    cout << setfill('=') << setw(23) << "" << setfill(' ') << endl;
    cout << left << setw(15) << "TOTAL" << "$" << right << setw(6) << total << endl;
    
    return 0;
}
```

::: notes
Walk through this example showing how multiple manipulators work together to create professional output.
:::

<!-- Slide 15 -->

## Complete Example: Grade Report

```cpp
#include <iostream>
#include <iomanip>
using namespace std;

int main() {
    string name = "Alice Johnson";
    int exam1 = 95, exam2 = 88, exam3 = 92;
    bool isPassing = true, onHonorRoll = true;
    double average = (exam1 + exam2 + exam3) / 3.0;
    
    cout << fixed << setprecision(2) << boolalpha;
    
    cout << "====== GRADE REPORT ======" << endl;
    cout << "Student: " << name << endl << endl;
    cout << "Exam Scores:" << endl;
    cout << "  Exam 1: " << exam1 << endl;
    cout << "  Exam 2: " << exam2 << endl;
    cout << "  Exam 3: " << exam3 << endl << endl;
    cout << "Average: " << average << endl;
    cout << "Passing: " << isPassing << endl;
    cout << "Honor Roll: " << onHonorRoll << endl;
    
    return 0;
}
```

<!-- Slide 16 -->

## Complete Example: Data Table

```cpp
cout << fixed << setprecision(2) << left;

// Headers
cout << setw(12) << "Product" << setw(10) << "Quantity" 
     << setw(10) << "Price" << setw(10) << "Total" << endl;
cout << setfill('-') << setw(42) << "" << setfill(' ') << endl;

// Data rows
cout << setw(12) << "Laptop" << right << setw(10) << 2 
     << setw(10) << 899.99 << setw(10) << (2 * 899.99) << endl;
cout << left << setw(12) << "Mouse" << right << setw(10) << 5 
     << setw(10) << 24.50 << setw(10) << (5 * 24.50) << endl;
```

**Output:**
```
Product     Quantity      Price      Total
------------------------------------------
Laptop             2     899.99    1799.98
Mouse              5      24.50     122.50
```

<!-- Slide 17 -->

## Common Mistakes to Avoid

**Mistake 1: Forgetting `#include <iomanip>`**
```cpp
cout << setprecision(2) << 3.14;  // ERROR without <iomanip>
```

**Mistake 2: Using `setprecision()` without `fixed`**
```cpp
cout << setprecision(2) << 19.5;  // Unpredictable!
cout << fixed << setprecision(2) << 19.5;  // Correct: 19.50
```

**Mistake 3: Forgetting `setw()` resets**
```cpp
cout << setw(10);        // WRONG - doesn't persist
cout << setw(10) << 42;  // CORRECT - use with each item
```

<!-- Slide 18 -->

## Common Formatting Patterns

**Money formatting:**
```cpp
cout << fixed << setprecision(2) << "$" << amount;
```

**Percentage formatting:**
```cpp
cout << fixed << setprecision(2) << (rate * 100) << "%";
```

**Table headers:**
```cpp
cout << left << setw(15) << "Header1" << setw(10) << "Header2" << endl;
```

**Boolean status:**
```cpp
cout << boolalpha << "Active: " << isActive << endl;
```

**Zero-padded numbers:**
```cpp
cout << setfill('0') << setw(6) << number << setfill(' ');
```

<!-- Slide 19 -->

## Quick Reference

| Manipulator | Persistent? | Purpose |
|-------------|-------------|---------|
| `fixed` | Yes | Fixed-point notation |
| `setprecision(n)` | Yes | Decimal places (with fixed) |
| `boolalpha` | Yes | Display bool as true/false |
| `setw(n)` | **NO** | Field width (next item only) |
| `left` / `right` | Yes | Alignment |
| `setfill(c)` | Yes | Fill character |
| `showpoint` | Yes | Show trailing zeros |
| `scientific` | Yes | Scientific notation |

::: notes
Emphasize that setw is the ONLY manipulator that doesn't persist - this is the most common source of student confusion.
:::

<!-- Slide 20 -->

## Practice Exercise

Create a program that displays a product inventory table with:

- Product names (left-aligned, 15 characters wide)
- Quantities (right-aligned, 8 characters wide)
- Unit prices (right-aligned, 2 decimal places)
- Total values (right-aligned, 2 decimal places, calculated from quantity Ã— price)
- At least 4 products
- Proper table headers and a separator line

**Bonus:** Add a grand total row at the bottom with a decorative separator.

::: notes
This exercise requires students to use setw, left/right alignment, fixed, setprecision, and setfill. It integrates all major concepts from the lecture.
:::

<!-- Slide 21 -->

